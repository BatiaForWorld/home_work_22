# Проект интернет-магазина
В проекте добавлено HTML-шаблона: 

home.html для домашней страницы и 

contacts.html для страницы с контактной информацией.

В проекте есть файл с зависимостями.

Создан новый контроллер для одного товара.

Контроллер одного товара принимает pk.

Контроллер одного товара получает объект из БД с помощью ORM-запроса.

Контроллер одного товара рендерит шаблон.

Создан шаблон для одного товара.

В шаблоне отображаются все данные об объекте.

Изображение выводится корректно.

Контроллер зарегистрирован на URL с корректным неймингом.

Все контроллеры приложения catalog переведены в CBV.

Создан класс формы для продукта.

Реализованы CRUD-операции для продуктов с помощью форм.

Собраны шаблоны с использованием форм.

Форма подключена в соответствующие контроллеры работы с продуктом.

В форме отображены все поля для создания/обновления объекта продукта.

Собран шаблон для подтверждения удаления продукта. 

Реализована валидация на запрещенные слова отдельно для имени и отдельно для описания.

Валидация проходит с помощью методов clean_... для полей формы.

Список запрещенных слов хранится в константах и переиспользуется в методах.

Добавлена кастомная валидация для поля price

Валидация проверяет, что цена продукта не может быть отрицательной.

Если цена введена неправильно, отображается соответствующее сообщение пользователю в ошибке 
ValidationError. 

Формы продукта стилизованы. 
## Создано приложение блога

Создана модель блоговой записи

 Модель блоговой записи содержит необходимые поля

В модели блоговой записи описан класс Meta, указаны параметры verbose_name и verbose_name_plural.

В модели блоговой записи реализован метод __str__

Для блоговой записи реализован полный CRUD.

CRUD для блоговой записи создан с помощью CBV.

Шаблоны блоговой записи используют базовый шаблон.

Шаблоны блоговой записи используют подшаблон с главным меню.

При открытии отдельной статьи увеличивается счетчик просмотров статьи.

На страницу списка статей выводятся только статьи, которые имеют положительный признак публикации.

После успешного редактирования записи происходит перенаправление пользователя на страницу отредактированной статьи.

## Аутентификация в веб-приложении

### Работа с пользователями
Создано новое приложение для работы с пользователями.

Реализована модель пользователя, которая отнаследована от AbstractUser.

В модель добавлены поля email, аватар, номер телефона, страна в соответствующих типах.

Переопределено поле авторизации на email.

Сделаны и запушены миграции нового приложения.

В настройках проекта заменена AUTH_USER_MODEL на текущую созданную.

Произведены базовые настройки модели.

### Регистрация
Создана форма для регистрации пользователя.

Создан контроллер регистрации пользователя, который взаимодействует с формой.

Определены и собраны шаблоны для регистрации.

Шаблоны рендерятся корректно.

В интерфейс интегрирована кнопка регистрации.

Переопределен метод form_valid() в контроллере регистрации, в который интегрирована отправка приветственного сообщения.

Произведены настройки почтового сервера в настройках проекта.

Регистрация подтверждается по отправке пользователю ссылки для подтверждения.
### Авторизация
Реализована авторизация пользователя.

Реализована форма авторизации.

Реализован шаблон для логина.

Шаблон рендерится корректно.

В интерфейс интегрирована кнопка входа.

### Ограничение доступа
Контроллеры для работы с продуктами дополнительно наследуются от LoginRequiredMixin.

Общедоступной осталась только страница просмотра списка товаров. 

## Права доступа

### Работа с группой
Создана группа «Модератор продуктов».

У модели продукта добавлено право на отмену публикации продукта.

Для группы «Модератор продуктов» настроено право на отмену публикации продукта.

Для группы «Модератор продуктов» настроено право на удаление любого продукта.

Проверяется наличие прав у пользователя при попытке отменить публикацию или 
удалить продукт.

Приложена фикстура с группами или реализована команда для заполнения групп с
настроенными правами в БД.

### Владельцы продуктов

Добавлено поле владельца к модели продукта.

Поле владельца связано с моделью пользователя через ForeignKey.

При создании нового продукта поле owner автоматически заполняется текущим
авторизованным пользователем.

Реализована проверка прав доступа в представлениях для редактирования и 
удаления продуктов, чтобы только владелец мог выполнять эти действия.

При запросе удаления проверяется дополнительно наличие группы модератора у пользователя. 

### Главная страница:

В контроллер главной страницы добавлен ORM-запрос на получение списка продуктов.

В шаблоне главной страницы отображаются только необходимые данные об объектах (изображение, имя, описание).

С главной страницы можно перейти на страницу товара и назад.

Изображение выводится корректно.

Описание товара на главной странице сокращено до 100 символов.

### Redis

Подключен Redis.

Внесены необходимые настройки в проект.

### Кеширование
Произведены настройки CACHE_ENABLED и CACHES.


Настроено кеширование страницы отображения информации об одном продукте.

Реализовано низкоуровневое кеширование списка продуктов.

### Бизнес-логика

Создана сервисная функция для работы с продуктами, которая будет возвращать список всех продуктов в указанной категории.

Реализовано отдельное представление и шаблон для отображения продуктов в указанной категории на сайте.

### Базовый шаблон

Выделен базовый шаблон.

В базовый шаблон вынесен весь базовый код HTML-страниц.

Базовый шаблон используется в шаблонах главной страницы, контактов и одного товара.

### Подшаблон

Создан подшаблон с главным меню.

Подшаблон с главным меню используется в шаблонах главной страницы, контактов и одного товара.

Для стилизации страниц используется Bootstrap.

- Создан контроллер для отображения домашней страницы.
- Создан контроллер для отображения страницы с контактной информацией.
- Настроена маршрутизация для этих контроллеров.
- Реализована форма обратной связи на странице контактов.
- Настроена обработка данных формы в контроллере, чтобы отображать сообщение об успешной отправке данных.

В приложении каталога созданы модели Product и Category и описаны для них базовые настройки.
### Описание моделей:
    1. Product: 
        ◦ наименование, 
        ◦ описание, 
        ◦ изображение, 
        ◦ категория, 
        ◦ цена за покупку, 
        ◦ дата создания, 
        ◦ дата последнего изменения. 
    2. Category: 
        ◦ наименование, 
        ◦ описание. 

Сформированы фикстуры для моделей Category и Product. 
### Созданы 3 раздельные кастомные команды для добавления тестовых продуктов:
 - Первая команда очищает полностью базу данных
 - Вторая команда создаёт категории товаров
 - Третья команда создает товары в категориях
- - - 
-   delete_db.py  - используйте для вызова команды:
```
python3 manage.py delete_db
```
-   add_category.py  -  используйте для вызова команды:
```
python3 manage.py add_category
```
-   add_products.py  -  используйте для вызова команды:
```
python3 manage.py add_product
```

В папке screenshots содержатся скриншоты выполнения запросов:

        ◦ Получиние всех категорий. 
        ◦ Получение всех продуктов. 
        ◦ Поиск всех продуктов в определенной категории. 
        ◦ Обновление цены для определенного продукта. 
        ◦ Удаление продукта.

## Настройка виртуального окружения

### Создание

```commandline
python -m venv venv 
```

### Активация (Windows)

```commandline
venv\Scripts\activate
```

### Активация (Linux/macOS)

```commandline
source venv/bin/activate
```
### Установка зависимостей
```commandline
pip install -r requirements.txt
```

Установка Django
```commandline
pip install django
```

Два основных способа инициализации проекта с помощью утилиты
django-admin :

```commandline
django-admin startproject config .
```

```commandline
django-admin startproject myproject
```

Создание приложения 
```commandline
python manage.py startapp app_name
```
Создание миграций
```commandline
python manage.py makemigrations
```
Применение миграций
```commandline
python manage.py migrate
```
Откат миграций полностью:
```commandline
python manage.py migrate <app_name> zero
```
Создайте администратора
```commandline
python manage.py createsuperuser
```
## Запуск сервера

```commandline
python manage.py runserver
```
### Остановка приложения

```commandline
Ctrl + C
```
## Автоматическое заполнение контента кастомными командами:

Очистить БД
```commandline
python manage.py delete_db
```
Создать Администратора
```commandline
python manage.py csu
```
Создать группу модераторов
```commandline
python manage.py create_moderators
```
Добавить категории товаров
```commandline
python manege.py add_category
```
Добавить товары
```commandline
python manege.py add_product
```



Автор: Казанцев Андрей